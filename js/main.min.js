var defaultDistrib="ubuntu";var defaultEngine="qwant";var distrib=!Cookies.get("distrib")?defaultDistrib:Cookies.get("distrib");var engine=!Cookies.get("engine")?defaultEngine:Cookies.get("engine");function loadJSON(a,c){var b=new XMLHttpRequest();b.open("GET","data/"+a,true);b.onreadystatechange=function(d){if(b.readyState===4){if(b.status===200){c(JSON.parse(b.responseText))}else{console.log("Unable to download the file "+a)}}};b.send(null)}function createLinks(a){var b=document.getElementById("websites");Object.keys(a).forEach(function(e){var c=document.createElement("li");var d=document.createElement("a");d.setAttribute("href",a[e]);d.textContent=e;c.appendChild(d);b.appendChild(c)})}function changeDistrib(b){var d=document.getElementById("logo-img");if(distrib!==d.className){d.setAttribute("src","img/"+b[distrib].name.toLowerCase()+"-logo.png");d.className=distrib;document.getElementById("search").style.backgroundColor="#"+b[distrib].main_color;var a=document.querySelector(".website");a.setAttribute("href",b[distrib].website);a.textContent="Site officiel";var c=document.querySelector(".doc");c.setAttribute("href",b[distrib].doc);c.textContent="Documentation";Cookies.set("distrib",distrib,{expires:365,path:"/"})}}function changeEngine(b){var a=document.getElementById("engine");if(engine!==a.className){document.getElementById("form-search").setAttribute("action",b[engine].url);document.querySelector("input[type='search']").setAttribute("name",b[engine].parameter);a.className=engine;a.style.backgroundColor="#"+b[engine].colors.circle;a.style.color="#"+b[engine].colors.font;a.textContent=engine.charAt(0).toUpperCase();Cookies.set("engine",engine,{expires:365,path:"/"})}}function fillSelect(d){var a=document.querySelector("#"+d[0]);for(var b=0;b<d[1].length;b++){var c=document.createElement("option");c.value=d[1][b].toLowerCase();c.textContent=d[1][b];a.appendChild(c)}a.value=(d[0]==="distribs")?distrib:engine}function distribs(a){var b=[];Object.keys(a).forEach(function(c){b.push(a[c].name)});fillSelect(["distribs",b]);changeDistrib(a)}function engines(a){var b=[];Object.keys(a).forEach(function(c){b.push(a[c].name)});fillSelect(["engines",b]);changeEngine(a)}loadJSON("links.min.json",createLinks);loadJSON("distribs.min.json",distribs);loadJSON("engines.min.json",engines);var distribsSelect=document.getElementById("distribs");var enginesSelect=document.getElementById("engines");distribsSelect.onchange=function(){distrib=distribsSelect.value;loadJSON("distribs.min.json",changeDistrib)};enginesSelect.onchange=function(){engine=enginesSelect.value;loadJSON("engines.min.json",changeEngine)};